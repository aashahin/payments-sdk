## API Checkout Experience

### Sections

* [Getting Started - Oman](/guides/getting-started-oman)
* [Accept Dashboard](/guides/accept-dashboard)
    * [Profile](/guides/accept-dashboard/profile)
    * [Payment Integrations](/guides/accept-dashboard/payment-integrations)
    * [Orders](/guides/accept-dashboard/orders)
    * [Transactions](/guides/accept-dashboard/transactions)
    * [Checkout Customization](/guides/accept-dashboard/checkout-customization)
* [API Checkout Experience](/guides/api-reference-guide)
    * [Basics of API](/guides/api-reference-guide/basics-of-api)
    * [API Setup -(Secret and Public Key)](/guides/api-reference-guide/api-setup-secret-and-public-key)
    * [Unified Intention API Experience](/guides/api-reference-guide/create-intention-payment-api-copy)
    * [Pixel (Native Payment Experience)](/guides/api-reference-guide/pixel)
    * [Split Payment Feature](/guides/api-reference-guide/split-payment-feature)
* [Mobile SDKs](/guides/mobile-sdks)
    * [Mobile SDKs V2](/guides/mobile-sdks/mobile-sdks-v2)
        * [IOS SDK](/guides/mobile-sdks/mobile-sdks-v2/ios-sdk)
        * [Android SDK](/guides/mobile-sdks/mobile-sdks-v2/android-sdk)
        * [Flutter SDK](/guides/mobile-sdks/mobile-sdks-v2/flutter-sdk)
        * [React Native SDK](/guides/mobile-sdks/mobile-sdks-v2/react-native-sdk)
* [E-Commerce Plugins](/guides/e-commerce-plugins)
    * [Shopify](/guides/e-commerce-plugins/shopify)
    * [WordPress (WooCommerce)](/guides/e-commerce-plugins/wordpress-woocommerce)
        * [Prerequisites Before Installation of Plugin ](/guides/e-commerce-plugins/wordpress-woocommerce/prerequisites-before-installation-of-plugin)
        * [Steps to Install the Paymob Plugin from WordPress Market Place](/guides/e-commerce-plugins/wordpress-woocommerce/steps-to-install-the-paymob-plugin-from-wordpress-market-place)
        * [Steps to Install the Paymob Plugin from WooCommerce Marketplace:](/guides/e-commerce-plugins/wordpress-woocommerce/steps-to-install-the-paymob-plugin-from-woocommerce-marketplace)
        * [Setting Up the Main Configuration ](/guides/e-commerce-plugins/wordpress-woocommerce/setting-up-the-main-configuration)
        * [Payment Integrations](/guides/e-commerce-plugins/wordpress-woocommerce/payment-integrations)
        * [Card Embedded Settings](/guides/e-commerce-plugins/wordpress-woocommerce/card-embedded-settings)
        * [WooCommerce Subscription](/guides/e-commerce-plugins/wordpress-woocommerce/woocommerce-subscription)
    * [OpenCart](/guides/e-commerce-plugins/opencart)
    * [Magento ](/guides/e-commerce-plugins/magento)
    * [Odoo](/guides/e-commerce-plugins/odoo)
    * [Odoo Enterprise](/guides/e-commerce-plugins/odoo-enterprise)
    * [WHMCS](/guides/e-commerce-plugins/whmcs)
    * [Cs-Cart](/guides/e-commerce-plugins/cs-cart)
    * [PrestaShop](/guides/e-commerce-plugins/prestashop)
    * [Joomla](/guides/e-commerce-plugins/joomla)
    * [ZenCart](/guides/e-commerce-plugins/zencart)
    * [OsCommerce](/guides/e-commerce-plugins/oscommerce)
    * [Laravel-Bagisto](/guides/e-commerce-plugins/laravel-bagisto)
    * [Drupal](/guides/e-commerce-plugins/drupal)
* [Test Credentials](/guides/test-credentials)
* [Payment Types](/guides/payment-types)
    * [3D Secure (3DS)](/guides/payment-types/3d-secure-3ds)
    * [Auth and Capture](/guides/payment-types/auth-and-capture)
    * [Card Verification](/guides/payment-types/card-verification)
    * [Pay With Saved Card Token](/guides/payment-types/pay-with-saved-card-token)
        * [Pay With Saved Card Token-Normal Moto Integration Flow](/guides/payment-types/pay-with-saved-card-token/pay-with-saved-card-token-normal-moto-integration-flow)
        * [Pay With Saved Card Token- 3DS Integration Flow through Unified Checkout.](/guides/payment-types/pay-with-saved-card-token/pay-with-saved-card-token-3ds-integration-flow-through-unified-checkout)
        * [Generating a Saved Card Token](/guides/payment-types/pay-with-saved-card-token/generating-a-saved-card-token)
        * [Generating a Payment Key](/guides/payment-types/pay-with-saved-card-token/generating-a-payment-key)
* [Payment Links](/guides/payment-links)
    * [Payment Link (Quick Link)](/guides/payment-links/payment-link-quick-link)
    * [Payment Link (API)](/guides/payment-links/payment-link-api)
        * [Login](/guides/payment-links/payment-link-api/login)
        * [Create Payment Link](/guides/payment-links/payment-link-api/create-payment-link)
* [Payment Actions](/guides/payment-actions)
    * [Dashboard](/guides/payment-actions/dashboard)
        * [Refund Transaction Through Dashboard](/guides/payment-actions/dashboard/refund-transaction-through-dashboard)
        * [Void Transaction Through Dashboard](/guides/payment-actions/dashboard/void-transaction-dashboard)
        * [Auth-Capture Transaction Through Dashboard](/guides/payment-actions/dashboard/auth-capture-payments-transactions-through-dashboard)
    * [API Level](/guides/payment-actions/api-level)
        * [Refund Transaction Through API](/guides/payment-actions/api-level/refund-transaction-copy)
        * [Void Transaction Through API](/guides/payment-actions/api-level/void-transaction-copy)
        * [Auth-Capture Transaction Through API](/guides/payment-actions/api-level/auth-capture-payments-copy)
* [Manage Callback](/guides/manage-callback)
    * [Transaction Callbacks ](/guides/manage-callback/transaction-callbacks)
    * [HMAC ](/guides/manage-callback/hmac)
        * [HMAC Processed Callback](/guides/manage-callback/hmac/hmac-processed-callback)
        * [HMAC Redirection Callback ](/guides/manage-callback/hmac/hmac-redirection-callback)
        * [HMAC Card Token Object](/guides/manage-callback/hmac/hmac-card-token-object)
* [Payment Methods](/guides/payment-methods)
    * [Card/Omannet](/guides/payment-methods/card-2)
* [Transaction Inquiry API](/guides/retrieve-a-transaction-inquiry-with-order-id-copy-1)
    * [Authentication Request (Generate Token) ](/guides/retrieve-a-transaction-inquiry-with-order-id-copy-1/authentication-request-generate-token)
    * [Retrieve Transaction With Order ID](/guides/retrieve-a-transaction-inquiry-with-order-id-copy-1/retrieve-a-tansaction-with-order-id)
    * [Retreive Transaction With Transaction ID](/guides/retrieve-a-transaction-inquiry-with-order-id-copy-1/retreive-transaction-with-transaction-id)
    * [Retrieve Transaction With Merchant Order ID( Special Reference Number)](/guides/retrieve-a-transaction-inquiry-with-order-id-copy-1/retrieve-transaction-with-special-reference-merchant-order-id)
* [Error Description](/guides/error-description)
    * [MIGS ](/guides/error-description/migs)
    * [Omannet](/guides/error-description/omannet)
* [Frequently Asked Questions (FAQs)](/guides/frequently-asked-questions-faqs)
    * [Apple Pay - Domain Verification](/guides/frequently-asked-questions-faqs/apple-pay-domain-verification)
    * [Apple Pay - Certificates Creation](/guides/frequently-asked-questions-faqs/apple-pay-certificates-creation)
    * [Frequently Asked Questions (FAQs) ](/guides/frequently-asked-questions-faqs/frequently-asked-questions-faqs)
    * [Troubleshooting ](/guides/frequently-asked-questions-faqs/troubleshooting)

***

# Getting Started - Oman

### Sign up for registering a new account

A guide to registering a new accept account.

---

> Why do I have to?
>
> In order to deal with any of Accept's services, you have to register an account, this tutorial will be your guide to create one.

### To create your account, follow these steps

1. Navigate to [Accept's home page](https://oman.paymob.com/portal2/en/register)

![Image showing Accept's home page registration form.](https://developers.paymob.com/guides/getting-started-oman/media/image-1.png)

2. After that, you will enter your mobile number on which you will be receiving OTP for first-time verification.

![Image showing mobile number input for OTP verification.](https://developers.paymob.com/guides/getting-started-oman/media/image-2.png)

3. As soon as you enter the OTP that you have received on your mobile number, you will get the below screen where you will be adding your name, and email details including your desired Password which you will be using for further logging.

![Image showing fields for name, email, and password setup.](https://developers.paymob.com/guides/getting-started-oman/media/image-3.png)

4. Please note that after this screen you will get a login screen where you will be entering your registered mobile number without country code and your password which you have set in the previous screen.

![Image showing the login screen.](https://developers.paymob.com/guides/getting-started-oman/media/image-4.png)

5. As soon as you will log in, you will get the below screen to enter your business details.

![Image showing business details input screen (Part 1).](https://developers.paymob.com/guides/getting-started-oman/media/image-5.png)

![Image showing business details input screen (Part 2).](https://developers.paymob.com/guides/getting-started-oman/media/image-6.png)

![Image showing business details input screen (Part 3).](https://developers.paymob.com/guides/getting-started-oman/media/image-7.png)

After filling in this information, you will get a " **Registration successful**" message on the screen and you will be routed to your Paymob Dashboard as below :

![Image showing the Paymob Merchant Dashboard.](https://developers.paymob.com/guides/getting-started-oman/media/image-8.png)

Great-Now you have successfully made your Merchant portal dashboard 

Now you can go to the [**Sign-In page**](https://oman.paymob.com/portal2/en/login) and start accepting online payments from your customers, Go check our use case guide and choose your perfect payment scenario!

> üëç**Note!**
>
> The status of the created account will be marked as a **"Test"** account, this will allow you to test all of Accept's services. When you finish your testing phase, Please contact your Account Manager or Contact Support team through email [support@paymob.com](https://mailto:support@paymob.com) or you can also raise a ticket through a support widget in your Merchant portal Dashboard to change its status to be **"Live"**.

# Accept Dashboard

A detailed guide to your Accept dashboard

In order to deal with any of Accept's services, you have to create an [Accept account](https://oman.paymob.com/portal2/en/register).

In your Accept portal, you can find:

* Profile.
* Payment Integrations.
* Orders.
* Transactions.
* Checkout Customization

# API Checkout Experience

Welcome to the API Checkout Experience documentation! In this guide, you will learn how to integrate and set up our API to provide a seamless and unified checkout experience. This includes everything you need to get started with setting up the API, generating your keys, and configuring both the Unified Intention API Checkout and Pixel Native Payment experiences.

We'll walk you through the basics of the API, including an overview of how it works, step-by-step instructions on how to get your environment set up, and how to use the various endpoints to facilitate secure and efficient transactions.

# Basics of API

**Introduction to RESTful APIs and HTTP Methods in Paymob**

Paymob's APIs are built on the REST architecture, providing a structured approach for developers to interact with their services. Let's delve into the basics of REST APIs, HTTP methods, parameters, and HTTPS status codes within the Paymob ecosystem:

**RESTful Functionality:** A RESTful web application exposes its resources along with information about them. It empowers clients to perform actions on these resources, such as creating new ones (e.g., a user profile) or modifying existing ones (e.g., updating a transaction).

> For instance, developers can utilize the Paymob Payments API to retrieve specific payment details. Upon making a request, the API responds with essential payment information like amount, currency, and payment method, typically formatted in JSON.

**HTTP Methods:** HTTP methods, or verbs, denote actions performed on resources. Paymob's APIs support various HTTP methods:

* **GET:** Retrieve a representation of a specific resource. Example: Fetching all received payments.
* **POST:** Submit data to create a new resource or trigger a state change. Example: Generating a payment link.
* **PUT:** Replace all representations of a target resource with the provided payload. Example: Modifying customer details.
* **DELETE:** Remove a specified resource. Example: Deleting an invoice.
* **PATCH:** Apply partial modifications to a resource. Example: Updating an order with specific changes.

**Parameters:** Parameters allow customization of API requests and responses. Paymob's APIs support four types of parameters:

* **Path Parameters:** Integral parts of the endpoint URL, identifying specific resources.
* **Query Parameters:** Appended to the endpoint URL to filter or paginate results.
* **Request Parameters**: Included in the request body, transmitting data to the API server.
* **Response Parameters:** Represent data returned by the server in response to a request.

**HTTPS Status Codes:** HTTP status codes communicate the outcome of client requests. Paymob employs HTTPS status codes categorized into three classes:

* **Success (200):** Successful response
* **Client Error (400):** Error on the transactions.
* **Server Error (500):** Internal server error.

# API Setup -(Secret and Public Key)

By comprehending these components, developers can effectively integrate Paymob's APIs into their applications, facilitating seamless payment processing experiences for users while ensuring security and reliability.

This documentation will guide you through the process of integrating with Paymob's powerful APIs and testing them using Postman. Whether you're looking to facilitate online payments, manage transactions, or streamline your e-commerce platform, Paymob APIs offer robust solutions to meet your needs.

**Step 1: Sign Up for Paymob**

Before diving into the APIs, you'll need to sign up for a Paymob account if you haven't already. Visit this [link](https://developers.paymob.com/guides/getting-started) to create your account. Once registered, you can access your dashboard to manage your integration settings.

**Step 2: Generating API Key, Secret key, and Public key.**

To authenticate and secure your interactions with Paymob's APIs, you'll need to generate an API key, secret key, and public key. Follow the steps below to generate these keys securely:

**Generating Test Mode API Key, Secret key, and Public key**

1. Log in to your Paymob account dashboard.
2. Navigate to the setting section, then into account info.
3. Click on "View API Key, Secretkey, or public key." However, you need to set your account to 'Test' mode as you'll find this option on the top of your portal page, to update your keys to Test keys.
4. Your test API key, Secret key, or public key will be displayed. Copy it securely for later use.
5. Test keys format: are\_pk\_test\_XXXXXXXXXXXXXX

![Image showing where to find Test API keys in the dashboard.](https://developers.paymob.com/guides/api-reference-guide/api-setup-secret-and-public-key/media/image-1.png)

**Generating Live Mode API Key, Secret key, and Public key**

1. Log in to your Paymob account dashboard.
2. Navigate to the Setting Section, then into account info.
3. Click on "View API Key Secret key or public key."However, you need to set your account to 'Live' mode as you'll find this option on the top of your portal page, to update your keys to live keys
4. Your live API key, Secret key, or public key will be displayed. Ensure you store it securely.
5. Live keys format: are\_pk\_live\_XXXXXXXXXXXXXXXXXT 

![Image showing where to find Live API keys in the dashboard.](https://developers.paymob.com/guides/api-reference-guide/api-setup-secret-and-public-key/media/image-2.png)

**Step 3: Testing APIs on Postman**

Postman provides a user-friendly interface for testing APIs. Follow these steps to test Paymob's APIs using Postman:

1. Download and install [Postman]().
2. Launch Postman and create a new request.
3. Enter the API endpoint URL you wish to test.
4. Set the appropriate HTTP method (GET, POST, PUT, DELETE).
5. Add any required headers, such as authentication headers with your API key.
6. Input any necessary request parameters or payloads.
7. Click "Send" to execute the request and view the response.

**Create Intention/ Payment API** You can create your payment requests via following simple one-step intension API. 

> Once you are done with the Intention you need to call this URL. It will open in the browser's window. [https://oman.paymob.com/unifiedcheckout/?publicKey=<add your public key here>&clientSecret=<add your client secret key here>](https://accept.paymob.com/unifiedcheckout/?publicKey=<add your public key here>&clientSecret=<add your client secret key here>)

> You will get your Public key from your Dashboard as mentioned in the Generating Public key section and you will get your client secret key in the response of Intention API as you see in the below screenshot.

![Screenshot illustrating receiving client_secret in the API response.](https://developers.paymob.com/guides/api-reference-guide/api-setup-secret-and-public-key/media/image-3.png)

After following this link and opening the consolidating link, you will route to the checkout page as shown below through which you can process your payment.

![Screenshot illustrating the checkout page accessible via the unified checkout URL.](https://developers.paymob.com/guides/api-reference-guide/api-setup-secret-and-public-key/media/image-4.png)

#### Header Parameters

| Parameter | Type | Description |
| :--- | :--- | :--- |
| Authorization | string | This is a secret key which you can get from your dashboard in settings. |
| Content-Type | string | |

#### Body Parameters

| Parameter | Type | Details |
| :--- | :--- | :--- |
| amount | number | Show child attributes |
| currency | string | Show child attributes |
| payment_methods | array | Show child attributes |
| items | array | Show child attributes |
| billing_data | object | Show child attributes |
| customer | object | Show child attributes |
| extras | object | Show child attributes |

### Response (200 Object)

#### Response Attributes

| Parameter | Type | Details |
| :--- | :--- | :--- |
| payment_keys | array | Show child attributes |
| id | string | |
| intention_detail | object | Show child attributes |
| client_secret | string | |
| payment_methods | array | Show child attributes |
| special_reference | string | |
| extras | object | Show child attributes |
| confirmed | boolean | |
| status | string | |
| created | string | |
| card_detail | string | |
| object | string | |

Base URL: `https://oman.paymob.com/`
End Point: `/v1/intention/`
Method: `POST`

```curl
curl --location 'https://oman.paymob.com/v1/intention/' \
--header 'Authorization: Token ***' \
--header 'Content-Type: application/json' \
--data-raw '{ 
"amount": 10, 
"currency": "OMR", 
"payment_methods": [ 
12, 
"card", 
"you can add Integration id directly or your integration name" 
], 
"items": [ 
{ 
"name": "Item name 1", 
"amount": 10, 
"description": "Watch", 
"quantity": 1 
} 
], 
"billing_data": { 
"apartment": "6", 
"first_name": "Ammar", 
"last_name": "Sadek", 
"street": "938, Al-Jadeed Bldg", 
"building": "939", 
"phone_number": "+96824480228", 
"country": "OMN", 
"email": "AmmarSadek@gmail.com", 
"floor": "1", 
"state": "Alkhuwair" 
}, 
"customer": { 
"first_name": "Ammar", 
"last_name": "Sadek", 
"email": "AmmarSadek@gmail.com", 
"extras": { 
"re": "22" 
} 
}, 
"extras": { 
"ee": 22 
} 
}'
```

#### Response

```json
{
 "payment_keys": [
  {
   "integration": 114,
   "key": "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx",
   "gateway_type": "MIGS",
   "iframe_id": ""
  }
 ],
 "id": "pi_test_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx",
 "intention_detail": {
  "amount": 10,
  "items": [
   {
    "name": "Item name 1",
    "amount": 10,
    "description": "Watch",
    "quantity": 1
   }
  ],
  "currency": "OMR"
 },
 "client_secret": "oman_csk_test_xxxxxxxxxxxxxxxxxxxxxxxxx",
 "payment_methods": [
  {
   "integration_id": 104,
   "alias": "",
   "name": "card",
   "method_type": "online",
   "currency": "OMR",
   "live": false
  },
  {
   "integration_id": 114,
   "alias": "",
   "name": "card",
   "method_type": "online",
   "currency": "OMR",
   "live": false
  }
 ],
 "special_reference": "",
 "extras": {
  "creation_extras": {
   "ee": 22
  },
  "confirmation_extras": ""
 },
 "confirmed": false,
 "status": "intended",
 "created": "2023-09-07T15:48:04.446108+05:00",
 "card_detail": "",
 "object": "paymentintention"
}
```

# Unified Intention API Experience

#### **The Intention API allows you to create a payment request by providing all the required parameters. Please ensure that all steps and parameters are accurately included to successfully initiate the payment request.**

---

#### Download the Postman collection from this [link.](https://drive.google.com/drive/folders/1xn6K2A-r-1-_JOB2Bw7tBLUTWgkYZLz5)

**Step 1:** You can create your payment request by intention API by adding a "secret key" in the authorization box in the header section. For the secret key please refer to this [section](https://developers.paymob.com/uae/api-reference-guide/api-setup-getting-started).

![Screenshot showing the secret key input in the Authorization header.](https://developers.paymob.com/guides/api-reference-guide/create-intention-payment-api-copy/media/image-1.png)

---

**Step 2:** Please send a POST request to the URL below after adding the request parameters in the body mentioned in the below screenshot.

**URL:** https://oman.paymob.com/v1/intention/

**Method**: *POST*

**Source**: *Merchant's server*

**Recipient**: *Accept's server*

#### Request:

![Screenshot detailing the structure of the JSON request body.](https://developers.paymob.com/guides/api-reference-guide/create-intention-payment-api-copy/media/image-2.png)

#### Response:

![Screenshot detailing the structure of the JSON response body.](https://developers.paymob.com/guides/api-reference-guide/create-intention-payment-api-copy/media/image-3.png)

> **Important Notes:**
>
> **‚áí**Please make sure to use the configured integration ID while creating the intention.
>
> ‚áíIt's important to maintain separate integration IDs for each environment, whether testing or live. This is because the implemented keys (secret/public keys) differ between environments.
>
> ‚áíPlease be aware that you can customize the intention API setup by including the necessary URLs to override the callback of the notification and redirection URL in your request. This allows you to distinguish between the URLs used for both actions and their callbacks. Use the provided parameters, "notification_url" and "redirection_url," as outlined in the screenshot sample.
>
> ‚áíPlease note that setting the notification URL will only send callback information related to the transaction. If the user clicks the "save card" button, the card token details will not be sent to the notification URL provided in the intention API. Instead, these details will be sent to the updated processed callback configured under the dashboard integration IDs, specifically referencing the Transaction Processed Callback URL set for that integration ID.
>
> ‚áíPlease note that the item array is not mandatory. However, if the merchant provides the item array, then both the items_name and items_amount fields are required.

* You will receive a unique webhook URL from the webhook site which you used in the notification url for testing as illustrated in the image below.

![Screenshot of a webhook site showing a received callback.](https://developers.paymob.com/guides/api-reference-guide/create-intention-payment-api-copy/media/image-4.png)

---

To set your webhook URL for the 3DS ID, follow these steps:

* Navigate to the Developers section and set your webhook URL.
* Then, go to the Payment Integration section.
* Click on the integration ID.
* In the lower section of the page, you can edit the integration details. Add your webhook URL in the "Transaction Processed Callback" section, as shown in the image below.

![Screenshot showing Transaction Processed Callback URL configuration in the dashboard.](https://developers.paymob.com/guides/api-reference-guide/create-intention-payment-api-copy/media/image-5.png)

---

**Step 3:** Once you are done with the Intention you need to call below url in the browser's window to access the checkout page as shown below. **https://oman.paymob.com/unifiedcheckout/?publicKey=<add your public key here>&clientSecret=<add your client secret key here>**

#### Obtaining Your Keys

To access your Public Key and Client Secret Key, please follow these instructions:

1. **Public Key:** You can retrieve your Public Key from your Dashboard. For detailed steps, refer to the [section](https://developers.paymob.com/guides/api-reference-guide/api-setup-secret-and-public-key) on accessing your Public Key.
2. **Client Secret Key:** Your Client Secret Key will be included in the response from the Intention API, as demonstrated in the example below.

![Screenshot highlighting the client_secret field in the Intention API response.](https://developers.paymob.com/guides/api-reference-guide/create-intention-payment-api-copy/media/image-6.png)

---

**Step 4:** Please enter your card details. For test credentials, refer to this [section.](https://developers.paymob.com/uae/checkout-copy-1/test-credentials-1)

![Screenshot showing the unified checkout page interface.](https://developers.paymob.com/guides/api-reference-guide/create-intention-payment-api-copy/media/image-7.png)

---

Step 5: The approval message will be displayed on the screen if the transaction is successful.

![Screenshot showing a successful transaction message.](https://developers.paymob.com/guides/api-reference-guide/create-intention-payment-api-copy/media/image-8.png)

---

#### **Webhook Responses:**

**Response 1:** **Callback Response**

![Screenshot of a successful transaction callback JSON response.](https://developers.paymob.com/guides/api-reference-guide/create-intention-payment-api-copy/media/image-9.png)

**Response 2:** **Token**

You will receive the token response only if the user selects the "Save Card" option on the checkout page as shown in the below image.

![Screenshot showing the "Save card" checkbox on the checkout page.](https://developers.paymob.com/guides/api-reference-guide/create-intention-payment-api-copy/media/image-10.png)

![Screenshot of a JSON response containing card token details.](https://developers.paymob.com/guides/api-reference-guide/create-intention-payment-api-copy/media/image-11.png)

---

| Title | Description | Mandatory |
| :--- | :--- | :--- |
| Total Amount (`amount`) | Pass the total amount in cents in this parameter. | Yes |
| Payment Methods (`payment_methods`) | Provide the configured Integration ID here. Merchants can use the ID as an integer or the name. If the Integration ID is integer, you can pass it without quotes (e.g., `1256`). If it includes a name, enclose it in quotes (e.g., `"card"`). | Yes |
| Currency (`currency`) | Specify the currency for the specific region in this parameter. It should be similar to the currency of the integration ID being used. The currency for OMAN is ‚ÄúOMR‚Äù. | Yes |
| Items Description (`description`) | It's under the ‚ÄúItems‚Äù array and you need to pass a description of the item in this parameter. The description field must not exceed 255 characters. | No. |
| Items Quantity (`quantity`) | It's under the ‚ÄúItems‚Äù array and you need to pass the quantity of the item in this parameter. | No |
| Items Amount (`amount`) | Pass the amount of the item in cents in this parameter. In case of passing multiple items, the total amount must be equal to the sum of the amount of the items. | Yes |
| Items Name (`name`) | It's under the ‚ÄúItems‚Äù array and you need to pass the name of the item in this parameter. The name field must not exceed 50 characters. | Yes |
| First Name (`first_name`) | Enter your first name in this parameter. It's under the billing data object. The first name field must not exceed 50 characters. | Yes |
| Last Name (`last_name`) | Enter your last name in this parameter. It's under the billing data object. The name field must not exceed 50 characters. | Yes |
| Email (`email`) | Provide your email address in this parameter. It's under the billing data object. | Yes |
| Country (`country`) | Specify your country name in this parameter. It's under the billing data object. | No |
| Phone Number (`phone_number`) | Include your phone number in this parameter. It's under the billing data object. Please note that you can use both international and domestic number formats. For the country code, you can use the alpha-2 or standard format | Yes |
| Extras (`extras`) | You can include any additional parameters in the **extras** parameter. This can be used by the merchants to send their own parameters and receive it in the callbacks.It will be found in the **payment key claims** object in the callback. | No |
| Special Reference (`special_reference`) | Pass a unique special reference number in this parameter. Refer to a unique or special identifier or reference associated with a transaction or order. It can be used for tracking or categorizing specific types of transactions and it returns within the transaction callback under **merchant\_order\_id.** | No |
| Notification URL (`notification_url`) | This refers to the URL that will receive the transaction-processed callback POST request after the transaction succeeds or fails, with all transaction details in the body of the request and this only works with card integration ID. | No |
| Redirection URL (`redirection_url`) | This refers to the transaction response callback URL that the customer will be redirected to after the transaction succeeds or fails, with most transaction details included as query parameters and this only works with card integration ID. | No |

---

Base URL: `https://oman.paymob.com/`
End Point: `/v1/intention/`
Method: `POST`

```curl
curl --location 'https://oman.paymob.com/v1/intention/' \
--header 'Authorization: Token sk_test_626xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx' \
--header 'Content-Type: application/json' \
--data-raw '{ 
"amount": 2000, 
"currency": "OMR", 
"payment_methods": [ 
158 
], 
"items": [ 
{ 
"name": "Item name", 
"amount": 2000, 
"description": "Item description", 
"quantity": 1 
} 
], 
"billing_data": { 
"apartment": "dumy", 
"first_name": "ala", 
"last_name": "zain", 
"street": "dumy", 
"building": "dumy", 
"phone_number": "+92345xxxxxxxx", 
"city": "dumy", 
"country": "dumy", 
"email": "ali@gmail.com", 
"floor": "dumy", 
"state": "dumy" 
}, 
"extras": { 
"ee": 22 
}, 
"special_reference": "phe4sjw11q-1xxxxxxxxx", 
"notification_url": "https://webhook.site/dabe4968-5xxxxxxxxxxxxxxxxxxxxxx", 
"redirection_url": "https://www.google.com/" 
}'
```

#### Response

```json
{
 "payment_keys": [
  {
   "integration": 158,
   "key": "ZXlKaGJHY2lPaUpJVXpVeE1pSXNJblI1Yxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx=",
   "gateway_type": "MIGS",
   "iframe_id": null
  }
 ],
 "id": "pi_test_3cxxxxxxxxxxxxxxxxxxxxxxxxxxxx",
 "intention_detail": {
  "amount": 2000,
  "items": [
   {
    "name": "Item name",
    "amount": 2000,
    "description": "Item description",
    "quantity": 1,
    "image": null
   }
  ],
  "currency": "OMR",
  "billing_data": {
   "apartment": "dumy",
   "floor": "dumy",
   "first_name": "ala",
   "last_name": "zain",
   "street": "dumy",
   "building": "dumy",
   "phone_number": "+92345xxxxxxxxxxx",
   "shipping_method": "",
   "city": "dumy",
   "country": "dumy",
   "state": "dumy",
   "email": "ali@gmail.com",
   "postal_code": ""
  }
 },
 "client_secret": "are_csk_test_da4xxxxxxxxxxxxxxxxxxxxxxxxx",
 "payment_methods": [
  {
   "integration_id": 158,
   "alias": null,
   "name": null,
   "method_type": "online",
   "currency": "OMR",
   "live": false,
   "use_cvc_with_moto": false
  }
 ],
 "special_reference": "phe4sjw11q-1xxxxxxxx",
 "extras": {
  "creation_extras": {
   "ee": 22
  },
  "confirmation_extras": null
 },
 "confirmed": false,
 "status": "intended",
 "created": "2024-10-02T16:31:23.246877+04:00",
 "card_detail": null,
 "card_tokens": [],
 "object": "paymentintention"
}
```

# Pixel (Native Payment Experience)

### Introduction

Paymob Pixel's JS SDK empowers merchants to create and customize their checkout experience using pre-built UI components that integrate seamlessly into their website. This allows customers to complete payments directly on the merchant's store without being redirected to Paymob's Hosted Checkout.

**Features:**

* Native Payment Experience for Websites and Stores.
* Fully Customizable UI Components.
* Enhanced Conversion Rates.
* Secure Payment Processing.

---

### Pre-Requisites

**Mandatory:**

* Ensure you have a Paymob account.
* Integrate the Intention API as described in the documentation for the [Create Intention Payment API.](https://developers.paymob.com/guides/checkout-copy-1/create-intention-payment-api)

**Optional:**

* Integrate the Update Intention Payment API.

---

### Version

Please get the latest Pixel package from this [link.](https://www.npmjs.com/package/paymob-pixel?activeTab=readme)

---

### Supported Payment Methods

Pixel supports only Card Payments (Migs and Omannet) in OMAN.

---

### How does Pixel Work?

1. Use the Create Intention Payment API to create a payment order.
2. Pass the `client_secret` from the Create Intention API response into the `clientSecret` parameter of the Pixel JS and load the Pixel JS. This will load the Pixel Checkout on the website.
3. If the order amount or billing details change, call the Update Intention Payment API with the updated order amount, billing data, or both.
4. Trigger the `updateIntentionData` event to ensure the updated order details are reflected in the checkout, without needing to reload the Pixel JS.

---

### To Begin Using the Checkout Pixel JS SDK

1. Include the following script tag in your HTML file:

```html
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/paymob-pixel@latest/styles.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/paymob-pixel@latest/main.css">
<script src="https://cdn.jsdelivr.net/npm/paymob-pixel@latest/main.js" type="module"></script>
```

---

### Definition of Parameters

1. **publicKey**: It can be accessed from the Merchant‚Äôs Dashboard ‚Üí Settings ‚Üí Account Info. Click on view to access it.

> **Note:** The public key will be different for Test and Live Modes.

```plaintext
onload = (event) => { 
 new Pixel({ 
 publicKey: 'egy_pk_test_XXXXXXXXXXXXXXXXXXXX' 
 }); 
};
```

**2. clientSecret**: Once you fire Intention API, you will receive `client_secret` in the API Response, which will be used in the Pixel SDK. Client Secret is unique for each order and expires in an hour.

```plaintext
onload = (event) => { 
 new Pixel({ 
 clientSecret: 'egy_csk_test_XXXXXXXXXXXXXXXXXXXX' 
 }); 
};
```

**3. paymentMethods**: Pass `card` for Card Payments.

```plaintext
onload = (event) => { 
 new Pixel({ 
 paymentMethods: ['card'], 
 }); 
};
```

**4. elementId:** ID of the HTML element where the checkout pixel will be embedded.

```plaintext
onload = (event) => { 
 new Pixel({ 
 elementId: 'paymob-elements', 
 }); 
};
```

**5. disablePay:** If you don‚Äôt want to use Paymob‚Äôs Pay Button for Card Payment:

Step 1: pass `disablepay` as TRUE.

Step 2: Define the button in the script. Once the user clicks on the Button on your website, we will trigger the Pay functionality from our side. The Button ID could be anything but the event should be `payFromOutside`.

```plaintext
const event = new Event('payFromOutside');
```

Step 3: Add the Logic for Event Listener in the script shown below.

If you pass `disablePay` as false or if the parameter is not passed in the script, the "Pay" Button would be shown for Card Payment. The user will click on Pay Button for Payment Processing.

> **Note:** This functionality can be used only for Card Payment.

```plaintext
// Step 1:
onload = (event) => { 
 new Pixel({ 
 disablePay: false/true 
 }); 
}; 
 
// Step 2:
<button id="payFromOutsideButton">Pay From Outside Button</button> 
 
// Step 3:
const button = document.getElementById('payFromOutsideButton'); 
button?.addEventListener('click', function () { 
 // Calling pay request
 const event = new Event('payFromOutside'); 
 window.dispatchEvent(event); 
});
```

**6. updateIntentionData:** When a merchant triggers the Create Intention Payment API with an initial order amount and loads the Pixel SDK on the checkout page, the order amount or billing data may change due to reasons such as shipping charges, discount promo codes, or user updates to billing information. Whenever you update the intention via API, you must also update the intention data within the SDK. Merchants can address this scenario by following these steps:

1. Call the Update Intention Payment API with the revised order amount, updated billing data, or both.
2. Trigger the function below as shown below. There's no need to reload the Pixel SDK on Checkout, as the order data will b